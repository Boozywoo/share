{"version":3,"sources":["app.js","jquery.cookie.js","main.js","map.js","pusher.js","settings.js","sw.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scripts.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./resources/assets/js/app.js\":\n/*!************************************!*\\\n  !*** ./resources/assets/js/app.js ***!\n  \\************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n\n\n/***/ }),\n\n/***/ \"./resources/assets/sass/app.scss\":\n/*!****************************************!*\\\n  !*** ./resources/assets/sass/app.scss ***!\n  \\****************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 0:\n/*!***************************************************************************!*\\\n  !*** multi ./resources/assets/js/app.js ./resources/assets/sass/app.scss ***!\n  \\***************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! d:\\OSPanel\\domains\\driver-app\\resources\\assets\\js\\app.js */\"./resources/assets/js/app.js\");\nmodule.exports = __webpack_require__(/*! d:\\OSPanel\\domains\\driver-app\\resources\\assets\\sass\\app.scss */\"./resources/assets/sass/app.scss\");\n\n\n/***/ })\n\n/******/ });","/*!\n * jQuery Cookie Plugin v1.4.1\n * https://github.com/carhartl/jquery-cookie\n *\n * Copyright 2013 Klaus Hartl\n * Released under the MIT license\n */\n(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD\n\t\tdefine(['jquery'], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// CommonJS\n\t\tfactory(require('jquery'));\n\t} else {\n\t\t// Browser globals\n\t\tfactory(jQuery);\n\t}\n}(function ($) {\n\n\tvar pluses = /\\+/g;\n\n\tfunction encode(s) {\n\t\treturn config.raw ? s : encodeURIComponent(s);\n\t}\n\n\tfunction decode(s) {\n\t\treturn config.raw ? s : decodeURIComponent(s);\n\t}\n\n\tfunction stringifyCookieValue(value) {\n\t\treturn encode(config.json ? JSON.stringify(value) : String(value));\n\t}\n\n\tfunction parseCookieValue(s) {\n\t\tif (s.indexOf('\"') === 0) {\n\t\t\t// This is a quoted cookie as according to RFC2068, unescape...\n\t\t\ts = s.slice(1, -1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\');\n\t\t}\n\n\t\ttry {\n\t\t\t// Replace server-side written pluses with spaces.\n\t\t\t// If we can't decode the cookie, ignore it, it's unusable.\n\t\t\t// If we can't parse the cookie, ignore it, it's unusable.\n\t\t\ts = decodeURIComponent(s.replace(pluses, ' '));\n\t\t\treturn config.json ? JSON.parse(s) : s;\n\t\t} catch(e) {}\n\t}\n\n\tfunction read(s, converter) {\n\t\tvar value = config.raw ? s : parseCookieValue(s);\n\t\treturn $.isFunction(converter) ? converter(value) : value;\n\t}\n\n\tvar config = $.cookie = function (key, value, options) {\n\n\t\t// Write\n\n\t\tif (value !== undefined && !$.isFunction(value)) {\n\t\t\toptions = $.extend({}, config.defaults, options);\n\n\t\t\tif (typeof options.expires === 'number') {\n\t\t\t\tvar days = options.expires, t = options.expires = new Date();\n\t\t\t\tt.setTime(+t + days * 864e+5);\n\t\t\t}\n\n\t\t\treturn (document.cookie = [\n\t\t\t\tencode(key), '=', stringifyCookieValue(value),\n\t\t\t\toptions.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n\t\t\t\toptions.path    ? '; path=' + options.path : '',\n\t\t\t\toptions.domain  ? '; domain=' + options.domain : '',\n\t\t\t\toptions.secure  ? '; secure' : ''\n\t\t\t].join(''));\n\t\t}\n\n\t\t// Read\n\n\t\tvar result = key ? undefined : {};\n\n\t\t// To prevent the for loop in the first place assign an empty array\n\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t// calling $.cookie().\n\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\n\t\tfor (var i = 0, l = cookies.length; i < l; i++) {\n\t\t\tvar parts = cookies[i].split('=');\n\t\t\tvar name = decode(parts.shift());\n\t\t\tvar cookie = parts.join('=');\n\n\t\t\tif (key && key === name) {\n\t\t\t\t// If second argument (value) is a function it's a converter...\n\t\t\t\tresult = read(cookie, value);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Prevent storing a cookie that we couldn't decode.\n\t\t\tif (!key && (cookie = read(cookie)) !== undefined) {\n\t\t\t\tresult[name] = cookie;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tconfig.defaults = {};\n\n\t$.removeCookie = function (key, options) {\n\t\tif ($.cookie(key) === undefined) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Must not alter options, thus extending a fresh object...\n\t\t$.cookie(key, '', $.extend({}, options, { expires: -1 }));\n\t\treturn !$.cookie(key);\n\t};\n\n}));\n","let informHide = false;\nlet informOrderHide = false;\nlet valApp = 0, valNoApp = 0, sId;\nvar Cookie = \"IsShow\";\nvar is_show = $.cookie(Cookie) || 1;\n\n$.ajaxSetup({\n    headers: {\n        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n    }\n});\n\n$(document).ready(function() {\n    if ($.cookie(Cookie) == 1) {\n        $(\".client-inform\").show();\n    } else {\n        $(\".client-inform\").hide();\n    }\n\n    maskPhone();\n\n    $(\"#from\").change(function() {\n        var option = $(\"#from > option:selected\");\n        var city_from = option.attr(\"city\");\n        var order_from = +option.attr(\"order\");\n        $('#to').attr(\"disabled\", null);\n    \n        $(\"#to > option\").each(function() {\n            $(this).attr(\"hidden\", null);\n    \n            var order = +$(this).attr(\"order\");\n            var city = $(this).attr(\"city\");\n            if (city_from == city || order <= order_from) {\n                $(this).attr(\"hidden\", \"\");\n            }\n        });\n    });\n    \n    $('#count_places').change(function() {\n        $('#price').val($('#price').attr('price') * $(\"#count_places\").val());\n    })\n\n    $(\"#filter_type\").change(function() {\n        var option = $(\"#filter_type > option:selected\");\n        var filter = option.attr(\"value\");\n    \n        window.location.search = \"filterType=\" + filter;\n    });\n\n    $('#country').change(function() {\n        maskPhone();\n    });\n});\n\n$(document).on('click', '.js_inform_show', function(){\n    informHide = !informHide;\n    if (informHide) {\n        is_show = 0;\n        $.cookie(Cookie, is_show);\n        $(\".client-inform\").hide();\n    } else{\n        is_show = 1;\n        $.cookie(Cookie, is_show);\n        $(\".client-inform\").show();\n    }\n});\n\n$(document).on('click', '.js_show_information', function(){\n    informOrderHide = !informOrderHide;\n    id = $(this).attr('id');\n\n    if (informOrderHide) {\n        $('.'+id).hide();\n    } else{\n        $('.'+id).show();\n    }\n});\n\nfunction switchCall(orderId, tourId, value) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + $(this).attr(\"tour\") + \"/switch_call\", { orderId: orderId, tour_id: tourId, isChecked: value })\n        .done(function(data) {\n            $(\"#head\" + orderId).load(\" #head\" + orderId);\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n    });\n}\n\nfunction switchPay(orderId, tourId, value) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + $(this).attr(\"tour\") + \"/switch_pay\", \n            { orderId: orderId, isChecked: value, tour_id: tourId })\n            .done(function(data) {\n                $(\"#head\" + orderId).load(\" #head\" + orderId);\n                $('.js_spinner-overlay').hide();\n                $('.background-spinner').hide();\n        });\n}\n\nfunction alertForD(id) {\n    alert(`Вы можете нажать на рейс только за ${id} часа до его начала!`);\n}\n\nfunction switchAppearanceOnStation(ordersId, tourId, isAll, stationId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/switch_appearance_on_station\", \n        { orders_id: ordersId, tour_id: tourId, is_all: isAll, station_id: stationId })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            location.reload();\n    });\n}\n\nfunction fillOrder(ordersId, tourId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/fill_order\", \n        { order_id: ordersId })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            location.reload();\n    });\n}\n\nfunction orderSetPresence(ordersId, tourId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/set_presence\",\n        { order_id: ordersId })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            location.reload();\n        });\n}\n\nfunction openCancel(order_id) {\n    $('#cancel_order').val(order_id);\n}\n\nfunction switchAppearance(orderId, tourId, mainOrderId, stationId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/switch_appearance\", { orderId: orderId, tour_id: tourId })\n    .done(function(data) {\n        $.get(location.href).then(function(page) {\n            $(\".\" + mainOrderId).html($(page).find(\".\" + mainOrderId).html());\n            if(data == 1) {\n                valApp = (($(\".app.\"+stationId).val() ? parseInt($(\".app.\"+stationId).val()) : null) ?? valApp) + 1;\n\n                if(($(\".noapp.\"+stationId).val() ? parseInt($(\".noapp.\"+stationId).val()) : valNoApp) > 0) {\n                    valNoApp = (($(\".noapp.\"+stationId).val() ? parseInt($(\".noapp.\"+stationId).val()) : null) ?? valNoApp) - 1;\n                }\n                sId = stationId ?? sId;\n\n                $(\".noapp.\"+sId).val(valNoApp);\n                $(\".app.\"+sId).val(valApp);\n            } else if(data == 0) {\n\n                if(($(\".app.\"+stationId).val() ? parseInt($(\".app.\"+stationId).val()) : valApp) > 0) {\n                    valApp = (($(\".app.\"+stationId).val() ? parseInt($(\".app.\"+stationId).val()) : null) ?? valApp) - 1;\n                }\n\n                valNoApp = (($(\".noapp.\"+stationId).val() ? parseInt($(\".noapp.\"+stationId).val()) : null) ?? valNoApp) + 1;\n                sId = stationId ?? sId;\n\n                $(\".noapp.\"+sId).val(valNoApp);\n                $(\".app.\"+sId).val(valApp);\n            } else {\n                if(($(\".noapp.\"+stationId).val() ? parseInt($(\".noapp.\"+stationId).val()) : valNoApp) > 0) {\n                    valNoApp = (($(\".noapp.\"+stationId).val() ? parseInt($(\".noapp.\"+stationId).val()) : null) ?? valNoApp) - 1;\n                }\n                sId = stationId ?? sId;\n                $(\".noapp.\"+sId).val(valNoApp);\n            }\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            // $(\".noapp\").html($(page).find(\".noapp\").html());\n            // $(\".app\").html($(page).find(\".app\").html());\n        })\n    });\n}\n\nfunction switchAppearanceAll(tourId, is_all) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/switch_appearance_all\", { tour_id: tourId, is_all: is_all })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            location.reload();\n        });\n}\n\nfunction cancelOrder(orderId, tourId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/cancel_order\", { orderId: orderId, tour_id: tourId })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            location.reload();\n        });\n}\n\nfunction completed(tourId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/completed\", { tour_id: tourId })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            window.location.href = '/driver/tours/';\n    });\n}\n\nfunction setFinished(tourId, orderId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/set_finished\", { tour_id: tourId, order_id: orderId })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            location.reload();\n    });\n}\n\nfunction unsetFinished(tourId, orderId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/unset_finished\", { tour_id: tourId, order_id: orderId })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            location.reload();\n    });\n}\n\nfunction setFinishedAll(ordersId, tourId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/set_finished_all\", { orders_id: ordersId, tour_id: tourId })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            location.reload();\n    });\n}\n\nfunction unsetFinishedAll(ordersId, tourId) {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post(\"/driver/tours/passengers/\" + tourId + \"/unset_finished_all\", { orders_id: ordersId, tour_id: tourId })\n        .done(function(data) {\n            $('.js_spinner-overlay').hide();\n            $('.background-spinner').hide();\n            location.reload();\n    });\n}\n\nfunction add(button, tourId, type, clients_phone) {\n    try {\n        $('.js_spinner-overlay').show();\n        $('.background-spinner').show();\n        button.disabled = true;\n        from = $('#from').val();\n        to = $('#to').val();\n        count_places = $('#count_places').val();\n        first_name = $('#first_name').val();\n        phone = $('#country option:selected').attr('code') + $('#phone').val();\n        price = $('#price').val();\n\n        last_name = $('#last_name').val() ? $('#last_name').val() : '';\n        middle_name = $('#middle_name').val() ? $('#middle_name').val() : '';\n        birth_day = $('#birth_day').val() ? $('#birth_day').val() : '';\n        country_id = $('#country_id').val() ? $('#country_id').val() : '';\n        passport = $('#passport').val() ? $('#passport').val() : '';\n        doc_type = $('#doc_type').val() ? $('#doc_type').val() : '';\n        doc_number = $('#doc_number').val() ? $('#doc_number').val() : '';\n        card = $('#card').val() ? $('#card').val() : '';\n        gender = $('#gender').val() ? $('#gender').val() : '';\n        flight_number = $('#flight_number').val() ? $('#flight_number').val() : '';\n\n        var type_pay = $('input[name=\"type_pay\"]:checked').val() || 'cash-payment'; \n    } catch(e) {\n        return e;\n    }\n    var was_pushed = 0;\n    if (clients_phone.length == 0) {\n        if (was_pushed == 0) {\n            postRequest(tourId, from, to, first_name, phone, type, type_pay, price, last_name, middle_name, birth_day, country_id,\n                passport, doc_type, doc_number, card, gender, flight_number, count_places);\n            was_pushed = 1;\n        }\n    } else {\n        for (var i = clients_phone.length - 1; i >= 0; i--) {\n            if (clients_phone[i] != phone.replace(/[^\\d;]/g, '')) {\n                if (was_pushed == 0) {\n                    postRequest(tourId, from, to, first_name, phone, type, type_pay, price, last_name, middle_name, birth_day, country_id,\n                        passport, doc_type, doc_number, card, gender, flight_number, count_places);\n                    was_pushed = 1;\n                }\n            } else {\n                alert('Этот пассажир уже забронирован на этот рейс!');\n                return;\n            }\n        }\n    }\n}\n\nfunction postRequest(tourId, from, to, first_name, phone, type, type_pay, price, last_name, middle_name, birth_day, country_id,\n    passport, doc_type, doc_number, card, gender, flight_number, count_places) {\n\n    let places = [];\n    for (let place = 0; place < count_places; place++) {\n        places.push('');\n    }\n\n    $.post('/driver/tours/passengers/' + tourId + '/add_passenger', {\n        api_token: 'wdK5O0BWnpd6CQbmllUBbDDxedV6DSXK',\n        tour_id: tourId,\n        station_from_id: from,\n        station_to_id: to,\n        first_name: first_name,\n        phone: phone,\n        type_pay: type_pay,\n        price: price,\n\n        last_name: last_name,\n        middle_name: middle_name,\n        birth_day: birth_day,\n        country_id: country_id,\n        passport: passport,\n        doc_type: doc_type,\n        doc_number: doc_number,\n        card: card,\n        gender: gender,\n        flight_number: flight_number,\n\n        places: places,\n    }).done(function(data) {\n        $('.js_spinner-overlay').hide();\n        $('.background-spinner').hide();\n        window.location.href = '/driver/tours/passengers/' + tourId + '/' + type;\n    });\n}\n\nfunction maskPhone() {\n    var country = $('#country option:selected').val();\n    switch (country) {\n        case \"ua\":\n            $(\"#phone\").mask(\"(99) 999-99-99\");\n            break;\n        case \"ru\":\n            $(\"#phone\").mask(\"(999) 999-99-99\");\n            break;\n        case \"by\":\n            $(\"#phone\").mask(\"(99) 999-99-99\");\n            break;\n        case \"de\":\n            $(\"#phone\").mask(\"(999) 9999-9999\");\n            break;\n        case \"cz\":\n            $(\"#phone\").mask(\"(999) 999-999\");\n            break;\n        case \"il\":\n            $(\"#phone\").mask(\"(99) 999-9999\");\n            break;\n        case \"us\":\n            $(\"#phone\").mask(\"(999) 999-9999\");\n            break;\n        case \"fi\":\n            $(\"#phone\").mask(\"(99) 999-999\");\n            break;\n        case \"no\":\n            $(\"#phone\").mask(\"(99) 999-999\");\n            break;\n        case \"pl\":\n            $(\"#phone\").mask(\"(999) 999-999\");\n            break;\n        case \"uz\":\n            $(\"#phone\").mask(\"(99) 999-99-99\");\n            break;\n        case \"tm\":\n            $(\"#phone\").mask(\"(999) 999-999\");\n            break;\n        case \"md\":\n            $(\"#phone\").mask(\"(99) 999-999\");\n            break;\n        case \"az\":\n            $(\"#phone\").mask(\"(99) 999-99-99\");\n            break;\n        case \"tj\":\n            $(\"#phone\").mask(\"(9999) 9-99-99\");\n            break;\n        case \"fr\":\n            $(\"#phone\").mask(\"(999) 999-999\");\n            break;\n        case \"gr\":\n            $(\"#phone\").mask(\"(999) 999-999\");\n            break;\n    }\n}","let addressShow = false;\nlet map, infoWindow, markerBus, currRend, service, directionsRenderer;\nlet pos, start, finish;\n\n$(document).on('click', '.js_address_show', function(){\n    addressShow = !addressShow;\n    addressShow = !addressShow;\n    if (addressShow) {\n        pos = {\n            lat: 53.9122225,\n            lng: 27.4226339\n        };\n        map = new google.maps.Map(document.getElementById('address_map'), {\n            center: pos,\n            zoom: 15\n        });\n        infoWindow = new google.maps.InfoWindow;\n        service = new google.maps.DirectionsService();\n        directionsRenderer = new google.maps.DirectionsRenderer();\n\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(function(position) {\n                pos = {\n                    lat: position.coords.latitude,\n                    lng: position.coords.longitude\n                };\n\n                markerBus = new google.maps.Marker({\n                    position: pos,\n                    map: map,\n                    icon: '/assets/admin/images/bus-icon.png',\n                });\n            });\n        }\n\n        const tourId = $(this).data('tour');\n        const orderId = $(this).data('order');\n\n        $.ajax({\n            url: \"/driver/routewaypoints\",\n            type: 'GET',\n            dataType: 'json',\n            data: {\n                tour_id: tourId,\n                order_id: orderId,\n            },\n            success: (data) => createRoute(data),\n            error: (data) => createRoute(data),\n        });\n\n        function createRoute(waypoints) {\n            if (!waypoints.length) {\n                markerBus.setMap(map);\n                infoWindow.open(map);\n                map.setCenter(pos);\n                console.log(\"no waypoints\");\n                return;\n            }\n            markerBus.setMap(null);\n            markerBus = null;\n\n            directionsRenderer.setMap(map);\n\n            start = {lat: parseFloat(pos.lat), lng: parseFloat(pos.lng)};\n\n            finish = {lat: parseFloat(waypoints[0].latitude),lng: parseFloat(waypoints[0].longitude)};\n\n            service.route(\n                {\n                    origin: start,\n                    destination: finish,\n                    travelMode: google.maps.TravelMode.DRIVING,\n                },\n                (response, status) => {\n                  if (status === \"OK\") {\n                    directionsRenderer.setDirections(response);\n                  } else {\n                    window.alert(\"Directions request failed due to \" + status);\n                  }\n                }\n            );\n        }\n        \n        $(\"#address_map\").show();\n        $(\"#navigator\").show();\n    } else {\n        $(\"#address_map\").hide();\n        $(\"#navigator\").hide();\n    }\n});\n\n$(document).on('click', '.js_address_show_street', function(){\n    addressShow = !addressShow;\n    if (addressShow) {\n        const myLatLng = { lat: parseFloat($(this).attr('latitude')), lng: parseFloat($(this).attr('longitude')) };\n\n        const map = new google.maps.Map(document.getElementById('station_map'), {\n            center: myLatLng,\n            zoom: 15\n        });\n        new google.maps.Marker({\n            position: myLatLng,\n            map,\n        });\n        \n        $(\"#station_map\").show();\n    } else {\n        $(\"#station_map\").hide();\n    }\n});","$(document).ready(function(){\n    let id = $('meta[id=\"tour_id\"]').attr('content');\n    let env = $('meta[id=\"env\"]').attr('content');\n    \n    if(id !== undefined && env !== undefined) {\n        let pusher = new Pusher(env, {\n            cluster: 'eu',\n            encrypted: true\n        });\n\n        var channel2 = pusher.subscribe('driver-taxi-channel2');\n        var dialogs = [];\n        let is_taxi = $('meta[id=\"is_taxi\"]').attr('content');\n        channel2.bind('new-taxi-order', function (data) {\n            if (data.app_url == APP_URL && is_taxi == 1) {\n                navigator.serviceWorker.register('/assets/driver/js/sw.js').then(function(registration) {\n                    registration.showNotification(\"Такси\", {\n                        body: data.message,\n                        icon: '/assets/admin/images/admin-logo.png'\n                    });\n                });\n\n                dialogs[data.client_id] = bootbox.dialog({\n                    title: \"Новый заказ!\",\n                    message: \"Заказ через 15 мин:<br> от \"+data.from+\"<br>до \"+data.to,\n                    closeButton: true,\n                    className: 'js-taxi-order-'+data.client_id,\n                    size: 'extra-large',\n                    onEscape: true,\n                    backdrop: true,\n                    buttons: {\n                        min5: {\n                            label: '5 мин',\n                            className: 'btn-success',\n                            callback: function(){\n                                taxiOrder(id, 5, data);\n                            }\n                        },\n                        min10: {\n                            label: '10 мин',\n                            className: 'btn-success',\n                            callback: function(){\n                                taxiOrder(id, 10, data);\n                            }\n                        },\n                        min15: {\n                            label: '15 мин',\n                            className: 'btn-success',\n                            callback: function(){\n                                taxiOrder(id, 15, data);\n                            }\n                        },\n                        cancel: {\n                            label: 'Пропускаю',\n                            className: 'btn-dark'\n                        }\n                    },\n                });\n                window.setTimeout(function(){\n                    dialogs[data.client_id].modal('hide');\n                }, 25000);\n            }\n        });\n\n        channel2.bind('close-taxi-order', function (data) {\n            if (data.app_url == APP_URL) {\n                dialogs[data.client_id].modal('hide');\n            }\n        });\n\n        if (!(\"Notification\" in window) ) {\n            $.ajax({\n                type: \"GET\",\n                async: true,\n                cache: true,\n                url: \"/driver/tours/passengers/\" + id + \"/get_id\",\n                success: function(ids) {\n                    var was_pushed = 0;\n\n                    if (ids !== null || ids !== '') {\n                        if (was_pushed == 0) {\n                            var channel = pusher.subscribe('driver-channel' + ids);\n                            channel.bind('my-event', function(datas) {\n                                was_pushed = 1;\n                                window.location.reload();\n                            });\n                        }\n                    }\n                }\n            });\n    \n        } else if (Notification.permission == \"granted\") {    \n            $.ajax({\n                type: \"GET\",\n                async: true,\n                cache: true,\n                url: \"/driver/tours/passengers/\" + id + \"/get_id\",\n                success: function(ids) {\n                    var was_pushed = 0;\n\n                    if (ids !== null || ids !== '') {\n                        if (was_pushed == 0) {\n                            var channel = pusher.subscribe('driver-channel' + ids);\n                            channel.bind('my-event', function(datas) {\n                                if ('serviceWorker' in navigator && 'PushManager' in window) {\n                                    was_pushed = 1;\n\n                                    navigator.serviceWorker.register('/assets/driver/js/sw.js').then(function(registration) {\n                                        registration.showNotification(datas.message);\n                                        window.location.reload();\n                                    });\n                                }\n                            });\n                        }\n\n                    }\n                }\n            });\n        } else {\n            Notification.requestPermission().then(function (permission) {\n                if (permission == \"granted\") {\n                    $.ajax({\n                        type: \"GET\",\n                        async: true,\n                        cache: true,\n                        url: \"/driver/tours/passengers/\" + id + \"/get_id\",\n                        success: function(ids) {\n                            var was_pushed = 0;\n\n                            if (ids !== null || ids !== '') {\n                                if (was_pushed == 0) {\n                                    var channel = pusher.subscribe('driver-channel' + ids);\n                                    channel.bind('my-event', function(datas) {\n                                        if ('serviceWorker' in navigator && 'PushManager' in window) {\n                                            was_pushed = 1;\n                                            if ('serviceWorker' in navigator && 'PushManager' in window) {\n                                                was_pushed = 1;\n            \n                                                navigator.serviceWorker.register('/assets/driver/js/sw.js').then(function(registration) {\n                                                    registration.showNotification(datas.message);\n                                                    window.location.reload();\n                                                });\n                                            }\n                                        }\n                                    });\n                                }\n\n                            }\n                        }\n                    });\n                }\n            });\n        }\n    }\n    \n});\n\nfunction taxiOrder(id, delay, data)    {\n    $('.js_spinner-overlay').show();\n    $('.background-spinner').show();\n    $.post('/driver/tours/taxiorder/' + id + '/add', {\n        tour_id: id,\n        station_from_id: data.from_id,\n        station_to_id: data.to_id,\n        client_id: data.client_id,\n        delay: delay,\n        places: [],\n    }).done(function(data) {\n        $('.js_spinner-overlay').hide();\n        $('.background-spinner').hide();\n        window.location.reload();\n    });\n}\n","let settingsShow = false;\nvar Cookie = \"Font Size\";\nvar fontsize = $.cookie(Cookie) || 'normal';\n\n$(document).ready(function() {\n    $(\".glyphicon-chevron-down\").css({\n        \"top\": \"8px\"\n    });\n    if (fontsize == \"normal\") {\n        $(\"body, button, span:not(.glyphicon)\").css({\n            \"font-size\": \"1.25rem\"\n        });\n        $(\"#normal\").prop(\"checked\", true);\n    } else if (fontsize == \"larger\") {\n        $(\"body, button, span:not(.glyphicon)\").css({\n            \"font-size\": \"1.4rem\"\n        });\n        $(\"#larger\").prop(\"checked\", true);\n    } else {\n        $(\"body, button, span:not(.glyphicon)\").css({\n            \"font-size\": \"1.6rem\"\n        });\n        $(\"#biggest\").prop(\"checked\", true);\n    }\n\n    $(document).on('click', '.js_settings_show', function(){\n        settingsShow = !settingsShow;\n        if (settingsShow) {   \n            $(\"#settings\").show();\n        } else {\n            $(\"#settings\").hide();\n        }\n    });\n});\n\nfunction biggestFont() {\n    $(\"body, button, span\").css({\n        \"font-size\": \"1.6rem\"\n    });\n    fontsize = 'biggest';\n    $.cookie(Cookie, fontsize);\n}\n\nfunction largerFont() {\n    $(\"body, button, span\").css({\n        \"font-size\": \"1.4rem\"\n    });\n    fontsize = 'larger';\n    $.cookie(Cookie, fontsize);\n}\n\nfunction normalFont() {\n    $(\"body, button, span\").css({\n        \"font-size\": \"1.25rem\"\n    });\n    fontsize = 'normal';\n    $.cookie(Cookie, fontsize);\n}","/*\n*\n*  Push Notifications codelab\n*  Copyright 2015 Google Inc. All rights reserved.\n*\n*  Licensed under the Apache License, Version 2.0 (the \"License\");\n*  you may not use this file except in compliance with the License.\n*  You may obtain a copy of the License at\n*\n*      https://www.apache.org/licenses/LICENSE-2.0\n*\n*  Unless required by applicable law or agreed to in writing, software\n*  distributed under the License is distributed on an \"AS IS\" BASIS,\n*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n*  See the License for the specific language governing permissions and\n*  limitations under the License\n*\n*/\n\n/* eslint-env browser, serviceworker, es6 */\n\n'use strict';"]}